<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Connect Wallet</title>
  <script src="https://cdn.jsdelivr.net/npm/web3@1.10.0/dist/web3.min.js"></script>
</head>
<body>
  <h2>Connect Your Wallet</h2>
  <button onclick="connect()">ü¶ä Connect MetaMask</button>
  <script>
    async function connect() {
      if (typeof window.ethereum === 'undefined') {
        alert("Please install MetaMask");
        return;
      }

      const provider = window.ethereum;
      const accounts = await provider.request({ method: 'eth_requestAccounts' });
      const address = accounts[0];
      const message = "Connect to Python Wallet App";
      const web3 = new Web3(provider);
      const signature = await web3.eth.personal.sign(message, address);

      const response = await fetch("/verify", {
        method: "POST",
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ address, signature, message })
      });

      const result = await response.json();
      if (result.status === "verified") {
        alert("‚úÖ Wallet Verified: " + result.address);
      } else {
        alert("‚ùå Verification Failed: " + result.error);
      }
    }
  </script>
</body>
</html>
